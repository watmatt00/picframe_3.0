ðŸ”’ Security Guidelines (Critical)

  Input Validation
  - Always validate user input before subprocess calls, shell commands, or file operations
  - Use whitelists/regex validation for IDs, paths, and remote names
  - Never directly interpolate user input into shell commands
  - Sanitize all data from web forms/API endpoints

  Command Injection Prevention
  - Validate before using in shell commands (especially rclone)
  - Never use source on user-editable config files (code injection risk)
  - Parse configs as data using grep, awk, or Python's configparser

  File Operations
  - Use atomic writes (write to temp, then rename)
  - Implement file locking (flock) to prevent race conditions
  - Set proper permissions (600 for sensitive files)
  - Validate paths to prevent directory traversal

  ðŸŽ¯ Code Quality Standards

  Bash Scripts
  #!/bin/bash
  set -euo pipefail  # Exit on error, undefined vars, pipe failures

  Required Elements
  - Status verification after systemctl commands
  - Error logging with details
  - Success confirmation messages
  - Proper exit codes (0=success, 1=error)
  - Consistent timestamp format: YYYY-MM-DD HH:MM:SS

  Logging Pattern
  # Success
  echo "[$(date +'%Y-%m-%d %H:%M:%S')] Service {name} {action} successfully"

  # Error
  echo "[$(date +'%Y-%m-%d %H:%M:%S')] ERROR: Failed to {action} {name}: {details}" >&2

  Python Standards
  - Follow PEP 8
  - Use type hints
  - Add docstrings to all functions/classes
  - Handle exceptions explicitly (no bare except:)
  - Use subprocess.run() with explicit arguments (never shell=True with user input)

  ðŸ”„ Development Workflow

  Environment Rules
  - PC/Tablet: Use test scripts (t_*.sh), promote with promote_to_prod.sh
  - Raspberry Pi: Only update with update_app.sh, never run promote_to_prod.sh

  Deployment Rules
  - All development and code changes take place on PC
  - Push changes up to GitHub repo
  - update pi using update_app.sh
  - test
  - pi should be considered read only

  Pi Connection rules
  - Ok to connect via ssh for read only operations. Configuration settings, file details/content, troubleshooting.

  Git Aliases
  - git quick - Auto-commit + sync
  - git commit - Add all changes and auto-commit
  - git sync - Fetch, rebase, and push
