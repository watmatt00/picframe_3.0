#!/bin/bash
# Pre-commit hook to prevent deletion of protected files
# To bypass: git commit --no-verify

PROTECTED_FILES=(".clinerules" "CONTRIBUTING.md" "README.md")

for file in "${PROTECTED_FILES[@]}"; do
    if git diff --cached --name-only --diff-filter=D | grep -q "^${file}$"; then
        echo ""
        echo "=========================================="
        echo "ERROR: Cannot delete protected file: $file"
        echo "=========================================="
        echo ""
        echo "This file is protected from accidental deletion."
        echo "If you really need to delete it, use:"
        echo "  git commit --no-verify"
        echo ""
        exit 1
    fi
done

exit 0
